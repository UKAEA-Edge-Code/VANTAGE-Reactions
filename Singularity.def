Bootstrap: docker
From: spack/ubuntu-noble:0.23.1
Stage: spython-base

%post
# Build stage with Spack pre-installed and ready to be used

# ADD . /root/Reactions

apt update && apt upgrade -y && apt install llvm-18-dev clang-18 libc++-18-dev libclang-18-dev libomp-18-dev -y
apt install -y git nano python3 cmake mpich

spack compiler find
spack compiler remove clang
spack compiler find /usr/lib/llvm-18

spack external find --path /usr/lib/llvm-18 llvm
spack external find python
spack external find cmake
spack external find mpich
%runscript
exec /bin/bash "$@"
%startscript
exec /bin/bash "$@"
