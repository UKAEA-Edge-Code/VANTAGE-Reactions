# This is a Spack Environment file.
#
# It describes the set of packages to be installed when developing
# NESO, along with configuration settings.
spack:
  # add package specs to the `specs` list
  specs:
  - matrix:
    - [nec_reactions.reactions+enable_tests ^neso-particles+build_tests ^adaptivecpp
        compilationflow=omp-library-only ^hdf5, nec_reactions.reactions+enable_tests+nvcxx
        ^neso-particles+build_tests ^adaptivecpp compilationflow=cuda-nvcxx ^hdf5
        ^cuda]
    - ['%gcc', '%clang']
    exclude:
    - nec_reactions.reactions+enable_tests+nvcxx%clang

  - nec_reactions.reactions+enable_tests+nvcxx%clang ^neso-particles+build_tests ^adaptivecpp
    compilationflow=cuda-llvm ^hdf5 ^cuda

  - matrix:
    - [gdb]
    - ['%gcc', '%clang']

  view: false
  packages:
    all:
      compiler: [clang, gcc]
  concretizer:
    unify: false
  repos:
  - ./Reactions-repo
  - ./NESO-Spack
  - $spack/var/spack/repos/builtin
  develop:
    reactions:
      path: .
      spec: reactions@working
    neso-particles:
      spec: neso-particles@working
